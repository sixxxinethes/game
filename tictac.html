<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‚ùå Tic Tac Toe</title>
  <link rel="stylesheet" href="../game.css" />

</head>
<body>
  <div class="container glass">
    <h2>‚ùå Tic Tac Toe</h2>
    <div id="game-area" class="game-area"></div>
  </div>

  <script>
    const playerName = localStorage.getItem("currentPlayer") || "Guest";
    const leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
    const gameArea = document.getElementById("game-area");

    const header = document.createElement("div");
    header.className = "game-header";
    header.innerHTML = `<div>üë§ ${playerName}</div><div>‚≠ï vs ‚ùå</div>`;
    gameArea.appendChild(header);

    const grid = document.createElement("div");
    grid.style.display = "grid";
    grid.style.gridTemplateColumns = "repeat(3, 1fr)";
    grid.style.gap = "10px";
    grid.style.width = "300px";
    grid.style.margin = "20px auto";
    gameArea.appendChild(grid);

    const board = Array(9).fill(null);
    let player = "X";

    function checkWinner(b) {
      const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
      for (const [a,b1,c] of wins) {
        if (b[a] && b[a]===b[b1] && b[a]===b[c]) return b[a];
      }
      return null;
    }

    board.forEach((_, i) => {
      const cell = document.createElement("div");
      cell.className = "tictactoe-cell";
      cell.onclick = () => {
        if (!board[i]) {
          board[i] = player;
          cell.textContent = player;
          const winner = checkWinner(board);
          if (winner) {
            leaderboard.push({ name: playerName, game: "Tic Tac Toe", score: 10 });
            localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
            alert(`${playerName} wins! üéâ`);
            window.close();
          } else if (!board.includes(null)) {
            alert("It's a draw!");
            window.close();
          }
          player = player === "X" ? "O" : "X";
        }
      };
      grid.appendChild(cell);
    });
  </script>
</body>
</html>
